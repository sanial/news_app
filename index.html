<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">
    <title>News APP</title>
</head>
<body>
     
    <marquee style="background-color: green; color: aliceblue;"><h3>A platform that provides all kinds of news to keep you updated</h3></marquee>
    <h1 class="text-center">News App</h1>

    <form action="" method="get">
        <script type="text/javascript">
                if(status=="ok")
                    mystatus = 'true';
                else
                    mystatus = 'false';

                function removeOptions(selectElement) {
                    var i, L = selectElement.options.length - 1;
                    for(i = L; i >= 0; i--) {
                        selectElement.remove(i);
                    }
                }

            function change(arr) {
                var el = document.getElementById('sel');
                removeOptions(document.getElementById('sel'));
                var el1 = document.getElementById('sel1');
                removeOptions(document.getElementById('sel1'));
                if(arr=="everything")
                {
                    el.options[0] = new Option("Select a language");
                    el.options[0].disabled=true;
                    el.options[0].hidden=true;
                    el.options[1] = new Option("German","de");
                    el.options[2] = new Option("English","en");
                    el.options[3] = new Option("Spanish","es");
                    el.options[4] = new Option("French","fr");
                    el.options[5] = new Option("Hebrew","he");
                    el.options[6] = new Option("Italian","it");
                    el.options[7] = new Option("Dutch","nl");
                    el.options[8] = new Option("Norwegian","no");
                    el.options[9] = new Option("Portuguese","pt");
                    el.options[10] = new Option("Russian","ru");
                    el.options[11] = new Option("Swedish","se");
                    el.options[13] = new Option("Urdu","ud");
                    el.options[12] = new Option("Chinese","zh");
                    el.options[13] = new Option("Arabic","ar");
                    el1.options[0] = new Option("Sorted by");
                    el1.options[0].disabled=true;
                    el1.options[0].hidden=true;
                    el1.options[1] = new Option("relevancy","relevancy");
                    el1.options[2] = new Option("popularity","popularity");
                    el1.options[3] = new Option("publishedAt","publishedAt");
                }
                else
                {
                    el.options[0] = new Option("Select a country");
                    el.options[0].disabled=true;
                    el.options[0].hidden=true;
                    el.options[1] = new Option("Argentina","ar");
                    el.options[2] = new Option("Australia","au");
                    el.options[3] = new Option("Brazil","br"); 
                    el.options[4] = new Option("Canada","ca");
                    el.options[5] = new Option("China","zh");
                    el.options[6] = new Option("France","fr");
                    el.options[7] = new Option("Germany","de");
                    el.options[8] = new Option("India","in");
                    el.options[9] = new Option("Ireland","ie");
                    el.options[10] = new Option("Israel","is");
                    el.options[11] = new Option("Italy","it");
                    el.options[12] = new Option("Netherlands","nl");
                    el.options[13] = new Option("Norway","no");
                    el.options[14] = new Option("Pakistan","pk");
                    el.options[15] = new Option("Russia","ru");
                    el.options[16] = new Option("Saudia Arabia","sa");
                    el.options[17] = new Option("Sweden","se");
                    el.options[18] = new Option("United Kingdom","gb");
                    el.options[19] = new Option("United States","us");
                    el.options[20] = new Option("Spain","es");
                    el1.options[0] = new Option("Select a category");
                    el1.options[0].disabled=true;
                    el1.options[0].hidden=true;
                    el1.options[1] = new Option("sports","sports");
                    el1.options[2] = new Option("technology","technology");
                    el1.options[3] = new Option("business","business");
                    el1.options[4] = new Option("entertainment","entertainment");
                    el1.options[5] = new Option("general","general");
                    el1.options[6] = new Option("health","health");
                    el1.options[7] = new Option("science","science");
                }
            }
        </script>
        <div style="display:flex; flex-direction: row; justify-content: center; align-items: center; margin-top: 40px;">
            
            <input type="text" name="q" placeholder="What do you want to search for?" style="border-radius: 55px; width: 30%; height: 47px;text-align: center;">&nbsp;&nbsp;&nbsp;
            <button id="submit" class="btn-success"  type="submit" value="Search" style="width: 90px; border-radius: 30px; height: 40px;">Search</button>
        </div>
        <div style="display:flex; flex-direction: row; justify-content: center; align-items: center; margin-top: 20px;">
            <input type="radio" name="Endpoint" value="everything" checked onclick='change(["everything"])'>
            <label for="everything">Everything</label>&nbsp;&nbsp;
            <input type="radio" name="Endpoint" value="topheadlines" onclick='change(["headlines"])'>
            <label for="topheadlines">Top Headlines</label>
        
            <select name="sel" id="sel" style="margin-left: 15px;"><option selected disabled hidden>Choose endpoint to populate lists</option></select>
            <select name="sel1" id="sel1" style="margin-left: 5px;"><option selected disabled hidden>Choose endpoint to populate lists</option></select>
            <script>change("everything");</script>
        </div>
    </form>
    <br>
    <br>
    {% if status == 'ok' %}
        <div class="container">
            <div class="row">
                {% for i in articles %}
                    <div class="col-sm-6">
                        <div class="card rounded shadow-lg m-2" style="">
                            <img src="{{ i.urlToImage }}" class="card-img-top" alt="...">
                            <div class="card-body">
                                <p class="card-text">{{ i.author }}</p>
                                <h5 class="card-title">{{ i.title }}</h5>
                                <p class="card-title">{{ i.source.name }}</p>
                                <p class="card-text">{{ i.description }}</p>
                                <hr>
                                <small>date: {{ i.publishedAt }}</small>
                                <a href="{{ i.url }}" target="_blank" class="btn btn-success m-1">See News</a>
                            </div>
                        </div>
                    </div>
                {% endfor %}
            </div>
        </div>
    {% endif %}
    {% if status == 'error' %}
        <div class="container">
            <div class="row">
                <div class="col-sm-6">
                    <div class="card rounded shadow-lg m-2" style="width: 25rem; background-color: #FFCCCC; border: 1px solid red;">
                        <p class="error-message" style="padding: 9px;"><b>Error:</b> {{ message }}</p>
                    </div>
                </div>
            </div>
        </div>
    {% endif %}
    
</body>
</html>